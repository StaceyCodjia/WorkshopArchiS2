<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Backpack</title>
    </head>
    
    <body>
        <h1>Modifier un groupe</h1>
        <form id="add-group-form" action="/reponse" method="POST">
            <div>
                <label for="nom_group">Nom:</label>
                <input type="text" id="nom_group" name="nom_group" value="{{group.nom_group}}" required>
            </div>

            <div>
                <label for="nbr_personnes">Nombre de personnes:</label>
                <input type="text" id="nbr_personnes" name="nbr_personnes" value="{{group.nbr_personnes}}" required>
            </div>

            <div>
                <input type="submit" value = "Enregistrer">
            
            </div>

        </form>

        <script>
            document.getElementById("add-group-form").addEventListener("submit", function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                fetch("/api/group/{{group.id}}/edit", {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        nom_group: formData.get("nom_group"),
                        nbr_personnes: formData.get("nbr_personnes")
                    })
                })
                .then(response => response.json())
                .then(data => {
                    alert("Groupe modifi√© !");
                    location.href = "/groups"; 
                });
            });
        </script>
    </body>
</html>